<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Release Management | Attaché</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Highly opinionated deployment tool for Laravel applications">
    
    <link rel="preload" href="/attache/assets/css/0.styles.ad7ae9fa.css" as="style"><link rel="preload" href="/attache/assets/js/app.b266b629.js" as="script"><link rel="preload" href="/attache/assets/js/2.761cf12e.js" as="script"><link rel="preload" href="/attache/assets/js/12.31f7a2d8.js" as="script"><link rel="prefetch" href="/attache/assets/js/10.724ee61b.js"><link rel="prefetch" href="/attache/assets/js/11.d8efa6e3.js"><link rel="prefetch" href="/attache/assets/js/13.933ced61.js"><link rel="prefetch" href="/attache/assets/js/3.c453ee41.js"><link rel="prefetch" href="/attache/assets/js/4.0f0106db.js"><link rel="prefetch" href="/attache/assets/js/5.ef77c706.js"><link rel="prefetch" href="/attache/assets/js/6.9f4ccd17.js"><link rel="prefetch" href="/attache/assets/js/7.c5233f30.js"><link rel="prefetch" href="/attache/assets/js/8.2db2f904.js"><link rel="prefetch" href="/attache/assets/js/9.8ed7240f.js">
    <link rel="stylesheet" href="/attache/assets/css/0.styles.ad7ae9fa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/attache/" class="home-link router-link-active"><!----> <span class="site-name">Attaché</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/attache/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/attache/how/" class="nav-link">
  How it works
</a></div><div class="nav-item"><a href="/attache/started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/attache/reference/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/attache/releases/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Release Management
</a></div> <a href="https://github.com/tpg/attache" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/attache/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/attache/how/" class="nav-link">
  How it works
</a></div><div class="nav-item"><a href="/attache/started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/attache/reference/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/attache/releases/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Release Management
</a></div> <a href="https://github.com/tpg/attache" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/attache/releases/" aria-current="page" class="active sidebar-link">Release Management</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/attache/releases/#getting-a-list-of-releases" class="sidebar-link">Getting a list of releases</a></li><li class="sidebar-sub-header"><a href="/attache/releases/#rollback" class="sidebar-link">Rollback</a></li><li class="sidebar-sub-header"><a href="/attache/releases/#activate-a-specific-release" class="sidebar-link">Activate a specific release</a></li><li class="sidebar-sub-header"><a href="/attache/releases/#pruning-old-releases" class="sidebar-link">Pruning old releases</a></li><li class="sidebar-sub-header"><a href="/attache/releases/#up-and-down" class="sidebar-link">Up and Down</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="release-management"><a href="#release-management" class="header-anchor">#</a> Release Management</h1> <p><img src="https://img.shields.io/github/v/release/tpg/attache?style=flat-square" alt=""></p> <p>Attaché provides a few tools for managing the releases on the server. You may have realized that during deployment, a new release is placed in the <code>releases</code> directory leaving any previous releases completely intact. You can interact with these releases using the commands under the <code>attache releases</code> namespace.</p> <h2 id="getting-a-list-of-releases"><a href="#getting-a-list-of-releases" class="header-anchor">#</a> Getting a list of releases</h2> <p>The first thing you'll probably want to do is see a list of releases currently sitting on your server. You can do so using the <code>releases:list</code> command. Pass in a server name as the first argument if you need to, otherwise the default server config applies here too.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>attache releases:list

// or<span class="token punctuation">..</span>.

attache releases:list production
</code></pre></div><p>This will return a table of releases, their IDs, the date of release, and if the release is active. Output should look a little like:</p> <div class="language- extra-class"><pre class="language-text"><code>---------------- --------------------- ------------
 ID               Release Date
---------------- --------------------- ------------
 20200317111232   17 March 2020 11:12
 20200317115727   17 March 2020 11:57   &lt;-- active
---------------- --------------------- ------------
</code></pre></div><p>There are two releases here and the most recent one is currently active.</p> <h2 id="rollback"><a href="#rollback" class="header-anchor">#</a> Rollback</h2> <p>We all like to think we're amazing at our jobs, but we all screw up every now and again. Sometimes, those mistakes make their way into production. It's not great and it's usually a scramble to get the previous version back online. Attaché provides a simple <code>releases:rollback</code> command that will reactivate the previous release.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>attache releases:rollback production
</code></pre></div><p>If you had to run a <code>releases:list</code> command after a rollback, you'll see that the previous release is now active.</p> <div class="language- extra-class"><pre class="language-text"><code>---------------- --------------------- ------------
 ID               Release Date
---------------- --------------------- ------------
 20200317111232   17 March 2020 11:12   &lt;-- active
 20200317115727   17 March 2020 11:57
---------------- --------------------- ------------
</code></pre></div><h2 id="activate-a-specific-release"><a href="#activate-a-specific-release" class="header-anchor">#</a> Activate a specific release</h2> <p>Similar to the <code>rollback</code> command, you can specify a release ID to activate. Simply provide the ID of the release. If you need to specify a server name, put the name after the release ID:</p> <div class="language- extra-class"><pre class="language-text"><code>attache releases:activate 20200317115727 production
</code></pre></div><p>In addition, if you ever need to simply activate the most recent release again, you can replace the release ID with the keyword <code>latest</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>attache releases:activate latest production
</code></pre></div><h2 id="pruning-old-releases"><a href="#pruning-old-releases" class="header-anchor">#</a> Pruning old releases</h2> <p>Leaving releases to sit on the server indefinitely will quickly eat up valuable disk space. Each release could be massive. It's a good idea to keep the number of releases on the server to a bare minimum. Attaché's bare minimum is 2. You can quickly remove old releases from the server using the <code>releases:prune</code> command. This will remove all the old releases except the most recent 2.</p> <div class="language- extra-class"><pre class="language-text"><code>attache releases:prune
</code></pre></div><p>Pruning is a desctructive action, so Attaché will confirm with you before deleting anything from the server. You can also specify the number of releases to prune by using the <code>--count</code> option and giving it a number to remove. If you give a higher number than there are releases, Attaché will always leave the most recent two.</p> <div class="language- extra-class"><pre class="language-text"><code>attache releases:prune production --count=5
</code></pre></div><p>You can also prune releases automatically during deployment by using the <code>--prune</code> option of the <code>deploy</code> command.</p> <div class="language- extra-class"><pre class="language-text"><code>attache deploy production --prune
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Note that you can never prune the current active release. Attaché will not allow a prune to complete if the active release would be removed.</p></div> <h2 id="up-and-down"><a href="#up-and-down" class="header-anchor">#</a> Up and Down</h2> <p>Laravel's Artisan command line tool provides plenty of power and is an essential part of any Laravel application. Attaché provides access to just two of artisan's commands: <code>up</code> and <code>down</code>. This is just for convenience sake and allows you to take the currently active release offline or online.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Offline</span>
attache releases:down production

<span class="token comment"># Online</span>
attache releases:up production
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/attache/assets/js/app.b266b629.js" defer></script><script src="/attache/assets/js/2.761cf12e.js" defer></script><script src="/attache/assets/js/12.31f7a2d8.js" defer></script>
  </body>
</html>
