<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started | Attaché</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Highly opinionated deployment tool for Laravel applications">
    
    <link rel="preload" href="/attache/assets/css/0.styles.ad7ae9fa.css" as="style"><link rel="preload" href="/attache/assets/js/app.b266b629.js" as="script"><link rel="preload" href="/attache/assets/js/2.761cf12e.js" as="script"><link rel="preload" href="/attache/assets/js/13.933ced61.js" as="script"><link rel="prefetch" href="/attache/assets/js/10.724ee61b.js"><link rel="prefetch" href="/attache/assets/js/11.d8efa6e3.js"><link rel="prefetch" href="/attache/assets/js/12.31f7a2d8.js"><link rel="prefetch" href="/attache/assets/js/3.c453ee41.js"><link rel="prefetch" href="/attache/assets/js/4.0f0106db.js"><link rel="prefetch" href="/attache/assets/js/5.ef77c706.js"><link rel="prefetch" href="/attache/assets/js/6.9f4ccd17.js"><link rel="prefetch" href="/attache/assets/js/7.c5233f30.js"><link rel="prefetch" href="/attache/assets/js/8.2db2f904.js"><link rel="prefetch" href="/attache/assets/js/9.8ed7240f.js">
    <link rel="stylesheet" href="/attache/assets/css/0.styles.ad7ae9fa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/attache/" class="home-link router-link-active"><!----> <span class="site-name">Attaché</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/attache/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/attache/how/" class="nav-link">
  How it works
</a></div><div class="nav-item"><a href="/attache/started/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Getting Started
</a></div><div class="nav-item"><a href="/attache/reference/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/attache/releases/" class="nav-link">
  Release Management
</a></div> <a href="https://github.com/tpg/attache" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/attache/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/attache/how/" class="nav-link">
  How it works
</a></div><div class="nav-item"><a href="/attache/started/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Getting Started
</a></div><div class="nav-item"><a href="/attache/reference/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/attache/releases/" class="nav-link">
  Release Management
</a></div> <a href="https://github.com/tpg/attache" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/attache/started/" aria-current="page" class="active sidebar-link">Getting Started</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/attache/started/#global-installation" class="sidebar-link">Global installation</a></li><li class="sidebar-sub-header"><a href="/attache/started/#git-repository-required" class="sidebar-link">Git repository required</a></li><li class="sidebar-sub-header"><a href="/attache/started/#initialize-a-project" class="sidebar-link">Initialize a project</a></li><li class="sidebar-sub-header"><a href="/attache/started/#safety-first" class="sidebar-link">Safety first</a></li><li class="sidebar-sub-header"><a href="/attache/started/#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/attache/started/#directory-structure-on-the-server" class="sidebar-link">Directory structure on the server</a></li><li class="sidebar-sub-header"><a href="/attache/started/#update-your-web-server" class="sidebar-link">Update your web server</a></li><li class="sidebar-sub-header"><a href="/attache/started/#server-env-file" class="sidebar-link">Server .env file</a></li><li class="sidebar-sub-header"><a href="/attache/started/#first-deployment" class="sidebar-link">First deployment</a></li><li class="sidebar-sub-header"><a href="/attache/started/#conclusion" class="sidebar-link">Conclusion</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h1> <p><img src="https://img.shields.io/github/v/release/tpg/attache?style=flat-square" alt=""></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Attaché requires <strong>PHP v7.4</strong> locally. There is no version requirement on the server except what is required by your application, however Attaché only supports Laravel 6 or newer and is only tested on the current major release.</p></div> <h2 id="global-installation"><a href="#global-installation" class="header-anchor">#</a> Global installation</h2> <p>You should install Attaché globally using composer:</p> <div class="language- extra-class"><pre class="language-text"><code>composer global require thepublicgood/attache
</code></pre></div><p>Make sure that <code>~/.composer/vendor/bin</code> is in your path. Now you should have access to Attache from anywhere on your composer through the <code>attache</code> command.</p> <h2 id="git-repository-required"><a href="#git-repository-required" class="header-anchor">#</a> Git repository required</h2> <p>Attaché assumes that your project has already been imported into a Git repository. If not, then you'll need to do that first. Attaché will clone the repository during deployment.</p> <p>Attaché will also run a <code>yarn prod</code> before doing the actual deployment to create compiled assets. You'll want to make sure you're not commiting those compiled assets to your repository. For most Laravel applications your <code>.gitignore</code> file should include:</p> <div class="language- extra-class"><pre class="language-text"><code>public/js/
public/css/
public/mix-manifest.json
</code></pre></div><p>Or place a <code>.gitignore file in</code>public/js<code>and</code>public/css` with the following content:</p> <div class="language- extra-class"><pre class="language-text"><code>!.gitignore
*
</code></pre></div><p>This will ensure that the <code>js</code> and <code>css</code> directories are at least created when cloing the repository.</p> <h2 id="initialize-a-project"><a href="#initialize-a-project" class="header-anchor">#</a> Initialize a project</h2> <p>Initialize Attaché in your Laravel project by running the following in your project root:</p> <div class="language- extra-class"><pre class="language-text"><code>attache init
</code></pre></div><p>The <code>init</code> command is usually non-interactive and will create a basic config file named <code>.attache.json</code> in your project root. The command will attempt to discover the remote Git URL and add it to your config file automatically. If you have more than one Git remote, the <code>init</code> command will give you the option to choose before creating the config file.</p> <p>The initial config file looks something like this:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;repository&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@repository.git&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;servers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example.test&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
            <span class="token property">&quot;user&quot;</span><span class="token operator">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;root&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/application&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;releases&quot;</span><span class="token operator">:</span> <span class="token string">&quot;releases&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;live&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;storage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;storage&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.env&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;php&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;composer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;composer&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;local&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;assets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;public/js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;public/js&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;public/css&quot;</span><span class="token operator">:</span> <span class="token string">&quot;public/css&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;public/mix-manifest.json&quot;</span><span class="token operator">:</span> <span class="token string">&quot;public/mix-manifest.json&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;branch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;master&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;migrate&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If, for some reason you want to use a different filename, you can use the <code>--filename</code> option of the <code>init</code> command.</p> <div class="language- extra-class"><pre class="language-text"><code>attache init --filename=attache-config.json
</code></pre></div><p>The other Attaché commands will not know how to find the renamed configuration file, you will need to supply a <code>--config</code> option with each one.</p> <div class="language- extra-class"><pre class="language-text"><code>attache deploy production --config=attache-config.json
</code></pre></div><h2 id="safety-first"><a href="#safety-first" class="header-anchor">#</a> Safety first</h2> <p>It's recommended that you add <code>.attache.json</code> to your .gitignore file unless there is very good reason to have it in your repository. This will ensure you don't potentially commit sensitive details about your environment into a publicly accessible repository. Instead, you could keep a copy of your config locally. If you ever loose the config file, it's simple enough to recreate.</p> <p>If committing the config file to your repository, ensure that it is private and that your server is properly secured.</p> <h2 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h2> <p>Open the <code>.attache.json</code> file in your editor. You'll need update the server configuration to reflect your environment. You can configure as many servers as you need. Each server describes a deployment target and can have <code>host</code>, <code>port</code>, <code>user</code>, <code>root</code> and <code>brach</code> settings.</p> <table><thead><tr><th>Setting</th> <th>Description</th></tr></thead> <tbody><tr><td><code>host</code></td> <td>The hostname or IP address of the server.</td></tr> <tr><td><code>port</code></td> <td>The SSH port. Usually 22.</td></tr> <tr><td><code>user</code></td> <td>The user that Attaché can log in as to deploy your application.</td></tr> <tr><td><code>root</code></td> <td>The path to the deployment root (see directory structure below).</td></tr> <tr><td><code>branch</code></td> <td>The Git branch to clone from.</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Attaché does not support password authentication and you MUST be able to log in to the server as the specified user using a public-private key.</p></div> <h2 id="directory-structure-on-the-server"><a href="#directory-structure-on-the-server" class="header-anchor">#</a> Directory structure on the server</h2> <p>When your application is deployed for the first time, Attaché will create a new project in the root path you specify in the config file. A new directory named <code>releases</code> will be created to contain the application deployments. A <code>storage</code> directory will be created which will be a reflection of your applications <code>storage</code> directory. Lastly, a <code>.env</code> file will also be placed in the root directory which will be your applications <code>.env</code> file. To make your application live a symbolic link named <code>live</code> will be created that points to <code>releases/{release_id}</code>.</p> <p>Once deployed, your application structure will look a bit like this:</p> <div class="language- extra-class"><pre class="language-text"><code>/project/root
|
+- storage
|
+- .env
|
+- releases
|   |
|   +- release_id
|       |
|       +- public
|       |
|       +- storage -&gt; /project/root/storage
|       |
|       +- .env -&gt; /project/root/.env
|
+- live -&gt; /project/root/releases/release_id
</code></pre></div><h2 id="update-your-web-server"><a href="#update-your-web-server" class="header-anchor">#</a> Update your web server</h2> <p>In order for this to work, you'll need to update your web server to serve the <code>live</code> symbolic link. If you're using Nginx, you don't need to change anything. Just set <code>root</code> to point to the symlink. If you're using Apache, you might need add something like <code>+options FollowSymLinks</code> to your server config to get it to actually serve the symbolic link.</p> <h2 id="server-env-file"><a href="#server-env-file" class="header-anchor">#</a> Server <code>.env</code> file</h2> <p>This step is optional, but it makes set up a little easier. Create a copy of your <code>.env</code> file as <code>attache.env</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>cp .env attache.env
</code></pre></div><p>Change the content of the new <code>attache.env</code> file to match how it would look on the server. If you don't do this, Attaché will use the content of the <code>.env.example</code> file but will automatically set <code>APP_ENV=production</code> and <code>APP_DEBUG=false</code>.</p> <h2 id="first-deployment"><a href="#first-deployment" class="header-anchor">#</a> First deployment</h2> <p>Before running your first deployment, we'll assume that you have already created a database schema for your application and you've updated the <code>attache.env</code> file. If you want, you can also add the <code>migrate</code> option to your server config and set it to <code>true</code>. This will migrate your database for you.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example.test&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">//...</span>
    <span class="token property">&quot;migrate&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Once you have the set up tasks complete, you can deploy your application for the first time. Usually when deploying, you'll use the <code>attache deploy</code> command, but since this is the first one, you'll need to use the <code>attache install</code> command. This takes a few extra steps (like placing the <code>.env</code> file and the <code>storage</code> directory) that would not normally be done during a normal deployment. If you created an <code>attache.env</code> file, specify it with the <code>--env</code> command-line attribute.</p> <div class="language- extra-class"><pre class="language-text"><code>attache install --env=attache.env
</code></pre></div><p>Deployment usually takes a few seconds to a few minutes depending on the complexity if your application and build tasks.</p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>If all goes well, your application should now be deployed to the server and accessible via your websites URL. Attaché provides a number of useful configuration options which can help to solve more complex deployment scenarios. Take a look at the <a href="/attache/reference/">configuration reference</a> for more details.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/attache/assets/js/app.b266b629.js" defer></script><script src="/attache/assets/js/2.761cf12e.js" defer></script><script src="/attache/assets/js/13.933ced61.js" defer></script>
  </body>
</html>
