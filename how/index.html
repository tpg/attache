<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How it works | Attaché</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Highly opinionated deployment tool for Laravel applications">
    
    <link rel="preload" href="/attache/assets/css/0.styles.ad7ae9fa.css" as="style"><link rel="preload" href="/attache/assets/js/app.b266b629.js" as="script"><link rel="preload" href="/attache/assets/js/2.761cf12e.js" as="script"><link rel="preload" href="/attache/assets/js/8.2db2f904.js" as="script"><link rel="prefetch" href="/attache/assets/js/10.724ee61b.js"><link rel="prefetch" href="/attache/assets/js/11.d8efa6e3.js"><link rel="prefetch" href="/attache/assets/js/12.31f7a2d8.js"><link rel="prefetch" href="/attache/assets/js/13.933ced61.js"><link rel="prefetch" href="/attache/assets/js/3.c453ee41.js"><link rel="prefetch" href="/attache/assets/js/4.0f0106db.js"><link rel="prefetch" href="/attache/assets/js/5.ef77c706.js"><link rel="prefetch" href="/attache/assets/js/6.9f4ccd17.js"><link rel="prefetch" href="/attache/assets/js/7.c5233f30.js"><link rel="prefetch" href="/attache/assets/js/9.8ed7240f.js">
    <link rel="stylesheet" href="/attache/assets/css/0.styles.ad7ae9fa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/attache/" class="home-link router-link-active"><!----> <span class="site-name">Attaché</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/attache/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/attache/how/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  How it works
</a></div><div class="nav-item"><a href="/attache/started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/attache/reference/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/attache/releases/" class="nav-link">
  Release Management
</a></div> <a href="https://github.com/tpg/attache" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/attache/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/attache/how/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  How it works
</a></div><div class="nav-item"><a href="/attache/started/" class="nav-link">
  Getting Started
</a></div><div class="nav-item"><a href="/attache/reference/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/attache/releases/" class="nav-link">
  Release Management
</a></div> <a href="https://github.com/tpg/attache" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="how-it-works"><a href="#how-it-works" class="header-anchor">#</a> How it works</h1> <p><img src="https://img.shields.io/github/v/release/tpg/attache?style=flat-square" alt=""></p> <p>Attaché makes a number of assumtions around how your environment is set up. Attaché is not as flexible as other more generic deployment tools, but in turn makes configuration a lot easier and much quicker. Attaché deployments are zero-downtime, meaning you don't need to take your application offline at all when deploying a new release.</p> <ul><li>You must be able to access your server via SSH using a private key. Attaché does not support password authentication.</li> <li>Your choice of web server muts be configured to serve symbolic links.</li></ul> <p>Once you have these items sorted, it's fairly simple to get Attaché running. See <a href="/attache/started/">Getting Started</a> if you're ready to jump right in.</p> <h2 id="zero-downtime"><a href="#zero-downtime" class="header-anchor">#</a> Zero Downtime</h2> <p>Attaché is a zero downtime deployment tool meaning that users don't experience any downtime between deployments. This is achieved through the use of symbolic links to serve different directories (releases). Each time you complete a deployment, the final step is to replace the symbolic link that the web server is configured to serve.</p> <ol><li>Build CSS and JS assets by running <code>yarn prod</code>.</li> <li>Clone the application repository onto the server into a new directory.</li> <li>Create a <code>storage</code> directory outside of the newly cloned repo.</li> <li>Create a <code>.env</code> file outside of the newly cloned repo.</li> <li>Symlink the <code>storage</code> directory into the new repo.</li> <li>Symlink the <code>.env</code> file into the new repo.</li> <li>Install Composer dependencies on the server with <code>composer install</code>.</li> <li>Copy the compiled assets into the <code>public/js</code> and <code>public/css</code> directories on the server.</li> <li>Create a symlink to the new repo.</li></ol> <p>The resulting directory structure on the server should look something like this:</p> <div class="language- extra-class"><pre class="language-text"><code>/path/to/application
|
+- .env
|
+- storage
|
+- releases
|  |
|  +- cloned_repo
|     |
|     +- .env -&gt; /path/to/application/.env
|     |
|     +- storage -&gt; /path/to/application/storage
|     |
|     +- public
|
+- live -&gt; /path/to/application/releases/cloned_repo
</code></pre></div><p>Your web server should be configured to serve <code>/path/to/application/live/public</code>.</p> <p>Each time you deploy again, you Attaché will clone the repo into a new directory inside the <code>releases</code> directory and replacee the <code>live</code> symlink. The web server doesn't know any better.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/attache/assets/js/app.b266b629.js" defer></script><script src="/attache/assets/js/2.761cf12e.js" defer></script><script src="/attache/assets/js/8.2db2f904.js" defer></script>
  </body>
</html>
